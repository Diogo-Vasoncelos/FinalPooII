{% extends "base.html" %}

{% block title %}Meus Pedidos - Sistema de Pedidos{% endblock %}

{% block content %}
<div class="container py-5">
    <!-- Header -->
    <div class="mb-4">
        <h1>ðŸ‘¤ Meu Painel</h1>
        <p class="text-secondary">Bem-vindo, {{ user.nome }}!</p>
    </div>

    <!-- EstatÃ­sticas -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-value">{{ total_pedidos }}</div>
            <div class="stat-label">Total de Pedidos</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ pedidos_entregues }}</div>
            <div class="stat-label">Pedidos Entregues</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ pedidos_pendentes }}</div>
            <div class="stat-label">Pedidos Pendentes</div>
        </div>
    </div>

    <!-- Lista de Pedidos -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">ðŸ“¦ Meus Pedidos</h2>
        </div>
        <div class="card-body">
            {% if pedidos %}
                <div style="overflow-x: auto;">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Pedido #</th>
                                <th>Data</th>
                                <th>Status</th>
                                <th>Valor Total</th>
                                <th>EndereÃ§o</th>
                                <th>ObservaÃ§Ãµes</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for pedido in pedidos %}
                            <tr>
                                <td><strong>#{{ pedido.id }}</strong></td>
                                <td>{{ pedido.created_at.strftime('%d/%m/%Y %H:%M') if pedido.created_at else '-' }}</td>
                                <td>
                                    {% if pedido.status == 'pendente' %}
                                        <span class="badge badge-warning">Pendente</span>
                                    {% elif pedido.status == 'processando' %}
                                        <span class="badge badge-info">Processando</span>
                                    {% elif pedido.status == 'enviado' %}
                                        <span class="badge badge-info">Enviado</span>
                                    {% elif pedido.status == 'entregue' %}
                                        <span class="badge badge-success">Entregue</span>
                                    {% elif pedido.status == 'cancelado' %}
                                        <span class="badge badge-danger">Cancelado</span>
                                    {% endif %}
                                </td>
                                <td><strong>{{ formatar_preco(pedido.valor_total) }}</strong></td>
                                <td>{{ pedido.endereco_entrega[:50] }}...</td>
                                <td>{{ pedido.observacoes if pedido.observacoes else '-' }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            {% else %}
                <div class="text-center py-4">
                    <p class="text-secondary">VocÃª ainda nÃ£o tem pedidos.</p>
                </div>
            {% endif %}
        </div>
    </div>

    <!-- InformaÃ§Ãµes do Perfil -->
    <div class="card mt-4">
        <div class="card-header">
            <h3 class="card-title">ðŸ‘¤ Meus Dados</h3>
        </div>
        <div class="card-body">
            <div class="grid grid-2">
                <div>
                    <p><strong>Nome:</strong> {{ user.nome }}</p>
                    <p><strong>Email:</strong> {{ user.email }}</p>
                    <p><strong>CPF:</strong> {{ user.cpf }}</p>
                </div>
                <div>
                    <p><strong>Telefone:</strong> {{ user.telefone }}</p>
                    <p><strong>Idade:</strong> {{ user.idade }} anos</p>
                    <p><strong>EndereÃ§o:</strong> {{ user.endereco }}</p>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
